<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>

   <extension
         id="org.nuxeo.ide.NuxeoNature"
         point="org.eclipse.core.resources.natures">
      <runtime>
         <run
               class="org.nuxeo.ide.common.NuxeoNature">
         </run>
      </runtime>
      <requires-nature id="org.eclipse.jdt.core.javanature" />
   </extension>

   <extension                                                                                                                                               
         point="org.eclipse.ui.popupMenus"> 
    <objectContribution                                                                                                                                   
            objectClass="org.eclipse.core.resources.IProject"                                                                                               
            adaptable="true"                                                                                                                                
            id="org.nuxeo.ide.pluginProjectToolSet">                                                                                                   
         <menu                                                                                                                                              
               label="Nuxeo Tools"                                                                                                            
               id="org.nuxeo.ide.tools">                                                                                                       
            <separator                                                                                                                                      
               name="group0">                                                                                                                               
            </separator>                                                                                                                                    
         </menu>                                                                                                                                            
         <visibility>                   
                                                                                                                             
                <not>                                                                                                                                       
                <or>                                                                                                                                        
            <objectState                                                                                                                                    
                    name="projectNature"                                                                                                                    
                    value="org.nuxeo.ide.NuxeoNature"/>                                                                                                  
                <objectState                                                                                                                                
                        name="open"                                                                                                                         
                        value="false"/>                                                                                                                     
            </or>                                                                                                                                           
            </not>                                                                                                                                          
         </visibility>                                                                                                                                      
                                                                                                                                                            
         <action
            label="Add Nuxeo Nature"                                                                                                                       
            class="org.nuxeo.ide.common.AddNuxeoNature"                                                                         
            menubarPath="org.nuxeo.ide.tools/group0"                                                                                           
            enablesFor="+"                                                                                                                                  
            id="org.nuxeo.ide.tools.addNuxeoNature">                                                                                                 
        </action>                                                                                                                                           
      </objectContribution> 
          <objectContribution                                                                                                                                   
            objectClass="org.eclipse.core.resources.IProject"                                                                                               
            adaptable="true"                                                                                                                                
            id="org.nuxeo.ide.tools.pluginProjectToolSet">                                                                                                   
         <menu                                                                                                                                              
               label="Nuxeo Tools"                                                                                                            
               id="org.nuxeo.ide.tools">                                                                                                       
            <separator                                                                                                                                      
               name="group0">                                                                                                                               
            </separator>                                                                                                                                    
         </menu>                                                                                                                                            
         <visibility>                                                                                                                                       
                <and>                                                                                                                                        
            <objectState                                                                                                                                    
                    name="projectNature"                                                                                                                    
                    value="org.nuxeo.ide.NuxeoNature"/>    
                <objectState                                                                                                                                
                        name="open"                                                                                                                         
                        value="true"/>                                                                                                                     
            </and>                                                                                                                                           
         </visibility>                                                                                                                                      
                                                                                                                                                            
         <action                                                                                                                                            
            label="Remove Nuxeo Nature"                                                                                                                       
            class="org.nuxeo.ide.common.RemoveNuxeoNature"                                                                         
            menubarPath="org.nuxeo.ide.tools/group0"                                                                                           
            enablesFor="+"                                                                                                                                  
            id="org.nuxeo.ide.tools.removeNuxeoNature">                                                                                         
        </action>                                                                                                                                           
      </objectContribution> 
      </extension>
      
    <extension 
       point="org.eclipse.ui.preferencePages"> 
      <page 
         id="org.nuxeo.ide.prefs" 
         name="Nuxeo Tools" 
         class="org.nuxeo.ide.common.NuxeoPreferencePage">
      </page> 
   </extension>
      
   <extension point="org.eclipse.ui.propertyPages">
     <page
       class="org.nuxeo.ide.common.NuxeoPropertyPage"
       id="org.nuxeo.ide.project.props"
       name="Nuxeo Tools">
         <enabledWhen>                                                                                                                                      
            <adapt                                                                                                                                          
                  type="org.eclipse.core.resources.IProject">                                                                                               
               <test                                                                                                                                        
                     property="org.eclipse.core.resources.projectNature"                                                                                    
                     value="org.nuxeo.ide.NuxeoNature">                                                                                               
               </test>                                                                                                                                      
            </adapt>                                                                                                                                        
         </enabledWhen>
     </page>
   </extension>   
         
</plugin>
