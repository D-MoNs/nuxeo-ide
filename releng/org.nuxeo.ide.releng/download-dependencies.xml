<project xmlns:artifact="antlib:org.apache.maven.artifact.ant">
    <target name="check-dependencies" unless="check-dependencies.available">
        <mkdir dir="externals/libs" />
        <available file="externals/${eclipse.sdk.archive}" property="eclipse-sdk-available" />
        <available file="externals/${eclipse.delta-pack.archive}" property="eclipse-delta-pack-available" />
        <available file="externals/${eclipse.ecf.sdk.archive}" property="ecf-sdk-available" />

        <available file="externals/libs/purge.jar" property="ant-purge-lib-available" />
        <available file="externals/libs/ant-contrib-1.0b3.jar" property="ant-contrib-lib-available" />
        <available file="externals/libs/maven-ant-tasks-2.1.0.jar" property="maven-ant-lib-available" />
        <available file="externals/libs/cobertura-1.9" property="ant-cobertura-lib-available" />
        <available file="externals/thirds/plugins" property="thirds-available" />
        <available file="externals/${swtbot.archive}" property="swtbot-available" />
    	<property name="check-dependencies.available" value="true" />
    </target>

    <target name="download-purge-task" unless="ant-purge-lib-available">
        <get dest="externals/libs/purge.jar" src="http://www.dallaway.com/ant/purge.jar" verbose="true" usetimestamp="true" />
    </target>

    <target name="download-maven-ant-tasks" unless="maven-ant-lib-available">
        <get dest="externals/libs/maven-ant-tasks-2.1.0.jar" src="http://www.mirrorservice.org/sites/ftp.apache.org/maven/binaries/maven-ant-tasks-2.1.0.jar" verbose="true" usetimestamp="true" />
    </target>

    <target name="check-maven-ant-tasks" depends="check-dependencies,download-maven-ant-tasks,setup-maven-ant-tasks" />


    <target name="setup-maven-ant-tasks" unless="maven-ant-tasks.available">
    	<path id="maven-ant-tasks.classpath" path="externals/libs/maven-ant-tasks-2.1.0.jar" />
        <typedef resource="org/apache/maven/artifact/ant/antlib.xml"
                 uri="antlib:org.apache.maven.artifact.ant"
                 classpathref="maven-ant-tasks.classpath" />
    	<property name="maven-ant-tasks.available" value="true" />
    </target>


    <target name="download-ant-contrib-task" unless="ant-contrib-lib-available">
        <get dest="externals/libs/ant-contrib-1.0b3-bin.tar.gz" src="http://downloads.sourceforge.net/sourceforge/ant-contrib/ant-contrib-1.0b3-bin.tar.gz" verbose="true" usetimestamp="true" />

        <untar src="externals/libs/ant-contrib-1.0b3-bin.tar.gz" dest="externals/libs" compression="gzip"/>
        <move file="externals/libs/ant-contrib/ant-contrib-1.0b3.jar" tofile="externals/libs/ant-contrib-1.0b3.jar"/>
        <delete file="externals/libs/ant-contrib-1.0b3-bin.tar.gz"/>
        <delete dir="externals/libs/ant-contrib"/>
    </target>


    <target name="download-ant-cobertura-task" unless="ant-cobertura-lib-available">
        <get dest="externals/libs/cobertura-1.9-bin.tar.gz" src="http://downloads.sourceforge.net/sourceforge/cobertura/cobertura-1.9-bin.tar.gz" verbose="true" usetimestamp="true" />

        <untar src="externals/libs/cobertura-1.9-bin.tar.gz" dest="externals/libs" compression="gzip"/>
        <delete file="externals/libs/cobertura-1.9-bin.tar.gz"/>
    </target>

    <target name="download-ant-libs" depends="download-purge-task, download-ant-contrib-task, download-ant-cobertura-task, download-maven-ant-tasks" />

    <target name="download-eclipse-sdk" unless="eclipse-sdk-available">
        <get dest="externals/${eclipse.sdk.archive}" src="${eclipse.sdk.url}/${eclipse.sdk.archive}" verbose="true" usetimestamp="true" />
    </target>

    <target name="download-eclipse-delta-pack" unless="eclipse-delta-pack-available">
        <get dest="externals/${eclipse.delta-pack.archive}" src="${eclipse.delta-pack.url}/${eclipse.delta-pack.archive}" verbose="true" usetimestamp="true" />
    </target>


    <target name="download-ecf-sdk" unless="ecf-sdk-available">
        <get dest="externals/${eclipse.ecf.sdk.archive}" src="${eclipse.ecf.sdk.url}/${eclipse.ecf.sdk.archive}" verbose="true" usetimestamp="true" />
    </target>

    <target name="download-swtbot" unless="swtbot-available">
        <get dest="externals/${swtbot.archive}" src="${swtbot.url}/${swtbot.archive}" verbose="true" usetimestamp="true" />
    </target>

    <target name="download-dependencies" depends="check-maven-ant-tasks, check-dependencies, download-eclipse-sdk, download-eclipse-delta-pack, download-ecf-sdk, download-ant-libs, download-swtbot" />
</project>

<!--
http://downloads.sourceforge.net/sourceforge/cobertura/cobertura-1.9-bin.tar.gz
http://www.dallaway.com/ant/purge.jar
http://downloads.sourceforge.net/sourceforge/ant-contrib/ant-contrib-1.0b3-bin.tar.gz
-->
